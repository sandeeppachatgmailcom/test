import{u as Re,b as Me,a as Le,r as x,c as ae,j as e,H as w,Z as Ue,ac as _e,ad as W,A as Y,B as oe,D as Ve,V as q,W as Q,a5 as $e,a6 as ze,a7 as Ge,a8 as de,a9 as We}from"./index-Bp26y0Cv.js";import{L as Ye}from"./index-yhx5pXTX.js";import{w as qe}from"./warning-Dl0QtHKe.js";function Xe({noFade:m}){Re();const v=Me(),k=Le(),[le,C]=x.useState(!1),[ne,S]=x.useState(!1),[Qe,ce]=x.useState(!1);x.useState(!1);const[j,ie]=x.useState(""),[xe,B]=x.useState(""),[he,Z]=x.useState({});console.log("statusProcedure",j);const T=x.useRef(null),A=x.useRef(null),pe=(t,o)=>{Z(d=>({...d,[t+o]:!d[t+o]}))};x.useEffect(()=>{const t=o=>{T.current&&!T.current.contains(o.target)&&A.current&&!A.current.contains(o.target)&&Z({})};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]),ae(t=>t==null?void 0:t.currentPatientSlice);const{caseSheetData:a,hasCaseSheet:me}=ae(t=>t==null?void 0:t.caseSheetSlice),[F,be]=x.useState([]),[D,ge]=x.useState([]),[I,ue]=x.useState([]),[H,fe]=x.useState([]),[g,je]=x.useState([]),[f,J]=x.useState([]),[P,K]=x.useState([]),[O,Ne]=x.useState([]),[N,we]=x.useState([]),[E,ke]=x.useState([]),[R,ye]=x.useState([]);x.useEffect(()=>{if(a&&me){const t=a==null?void 0:a.cheifComplaints,o=a==null?void 0:a.clinicalFindings,d=a==null?void 0:a.diagnosis,h=a==null?void 0:a.medicalHistory,c=a==null?void 0:a.note,r=a==null?void 0:a.otherAttachment,n=a==null?void 0:a.investigation,s=a==null?void 0:a.services,l=a==null?void 0:a.procedures,i=a==null?void 0:a.treatmentData3,b=i==null?void 0:i.map(p=>{var re;let u=0;return(re=p==null?void 0:p.service)==null||re.forEach(G=>{var se;(se=G==null?void 0:G.procedure)==null||se.forEach(()=>{u++})}),{tooth:p==null?void 0:p.tooth,service:p==null?void 0:p.service,total:u,completed:(p==null?void 0:p.completed)||0}});J(b),be(t),ge(o),ue(d),Ne(h),we(c),ke(r),ye(n),fe(s),je(l)}else k("/patientDetail/overview")},[a]);const M=(t,o,d)=>{const h=f.map(c=>{var l;let r="";const n=(l=c.service)==null?void 0:l.map(i=>{var p;const b=(p=i.procedure)==null?void 0:p.map(u=>u._id===t?(r=u.finished,{...u,finished:d,updatedAt:d=="Completed"?new Date:null}):u);return{...i,procedure:b}});let s=c.completed;return d=="Completed"?s++:(r=="Completed"&&d=="Cancelled"||r=="Completed"&&d=="In Progress")&&s--,c.tooth===o?{...c,service:n,completed:s}:c});J(h)};function ve(t){const{name:o,value:d}=t.target;o=="statusProcedure"&&(ie(d),B(""))}const X=t=>{K(t==="all"?f.map(o=>o.tooth):o=>o.includes(t)?o.filter(d=>d!==t):[...o,t])},Ce=P.length?f.filter(t=>P.includes(t.tooth)):f;async function Se(){var t,o;try{C(!0);const d={caseSheetId:a==null?void 0:a._id,treatmentData:f},h=await q.updateTreatment(d);v(Q((o=(t=h==null?void 0:h.data)==null?void 0:t.data)==null?void 0:o.caseSheets)),C(!1)}catch(d){C(!1),console.log("error while updating treatment",d)}}const[Be,Te]=x.useState(0),Ae=(t,o)=>{const d=a==null?void 0:a.treatmentData3,h=d==null?void 0:d.map(r=>{var s;let n=0;return(s=r==null?void 0:r.service)==null||s.forEach(l=>{var i;(i=l==null?void 0:l.procedure)==null||i.forEach(()=>{n++})}),{tooth:r==null?void 0:r.tooth,service:r==null?void 0:r.service,total:n,completed:(r==null?void 0:r.completed)||0}});let c=0;return h.map(r=>{var n;return(n=r.service)==null||n.map(s=>{var l;(l=s.procedure)==null||l.map(i=>{i.finished=="In Progress"&&c++})}),r}),Te(c),c};async function Fe(){var t,o;try{if(Ae()>0)S(!0);else{const h={caseSheetId:a==null?void 0:a._id},c=await q.closeCase(h);v(Q((o=(t=c==null?void 0:c.data)==null?void 0:t.data)==null?void 0:o.caseSheets)),k("/patientDetail/cases")}}catch(d){console.log("error while closing case sheet",d)}}const De=(t,o)=>{const d=a==null?void 0:a.treatmentData3,c=(d==null?void 0:d.map(r=>{var s;let n=0;return(s=r==null?void 0:r.service)==null||s.forEach(l=>{var i;(i=l==null?void 0:l.procedure)==null||i.forEach(()=>{n++})}),{tooth:r==null?void 0:r.tooth,service:r==null?void 0:r.service,total:n,completed:(r==null?void 0:r.completed)||0}})).map(r=>{var s;const n=(s=r.service)==null?void 0:s.map(l=>{var b;const i=(b=l.procedure)==null?void 0:b.map(p=>p.finished=="In Progress"?{...p,finished:"Completed"}:{...p});return{...l,procedure:i}});return{...r,service:n,completed:r==null?void 0:r.total}});return console.log("newFilteredData",c),c},Ie=(t,o)=>{const d=a==null?void 0:a.treatmentData3,c=(d==null?void 0:d.map(r=>{var s;let n=0;return(s=r==null?void 0:r.service)==null||s.forEach(l=>{var i;(i=l==null?void 0:l.procedure)==null||i.forEach(()=>{n++})}),{tooth:r==null?void 0:r.tooth,service:r==null?void 0:r.service,total:n,completed:(r==null?void 0:r.completed)||0}})).map(r=>{var s;const n=(s=r.service)==null?void 0:s.map(l=>{var b;const i=(b=l.procedure)==null?void 0:b.map(p=>p.finished=="In Progress"?{...p,finished:"Cancelled"}:{...p});return{...l,procedure:i}});return{...r,service:n,completed:r==null?void 0:r.total}});return console.log("newFilteredData",c),c};async function He(){var t,o;try{if(j){let d={caseSheetId:a==null?void 0:a._id};if(j=="Completed"){const c=De();d={...d,treatmentData:c}}else if(j=="Cancelled"){const c=Ie();d={...d,treatmentData:c}}else return;console.log("dataObject",d);const h=await q.updateTreatmentAndCloseCase(d);v(Q((o=(t=h==null?void 0:h.data)==null?void 0:t.data)==null?void 0:o.caseSheets)),k("/patientDetail/cases")}else B("Please select")}catch(d){console.log("error while closing case sheet",d)}}const L=x.useRef(),y=x.useRef(),U=x.useRef(),_=x.useRef(),V=x.useRef(),$=x.useRef(),z=x.useRef(),Pe=[{id:1,content:"Chief Complaints",icon:e.jsx($e,{className:"text-darkSecondary h-4 w-4"}),action:()=>{L.current&&L.current.scrollIntoView({behavior:"smooth"})}},{id:2,content:"Clinical Findings",icon:e.jsx(ze,{className:"text-darkSecondary "}),action:()=>{y.current&&y.current.scrollIntoView({behavior:"smooth"})}},{id:3,content:"Medical History",icon:e.jsx(Ge,{className:"text-darkSecondary "}),action:()=>{U.current&&U.current.scrollIntoView({behavior:"smooth"})}},{id:4,content:"Investigation",icon:e.jsx(de,{className:"text-darkSecondary text-xl"}),action:()=>{_.current&&_.current.scrollIntoView({behavior:"smooth"})}},{id:5,content:"Services",icon:e.jsx(We,{className:"text-darkSecondary "}),action:()=>{V.current&&V.current.scrollIntoView({behavior:"smooth"})}},{id:6,content:"Other Attachments",icon:e.jsx(de,{className:"text-darkSecondary "}),action:()=>{$.current&&$.current.scrollIntoView({behavior:"smooth"})}},{id:7,content:"Notes",icon:e.jsx(Ye,{className:"text-darkSecondary h-4 w-4"}),action:()=>{z.current&&z.current.scrollIntoView({behavior:"smooth"})}}],[Oe,ee]=x.useState();async function Ee(){try{ee(!0),ee(!1),k("/patientDetail/editCaseSheet",{state:{id:a==null?void 0:a._id}})}catch{setShowLoadingModal(!1)}}const te=()=>{S(!1),ce(!1),B("")};return e.jsxs("div",{className:"md:container md:mx-auto px-4 py-2 w-full h-auto  rounded-lg border-[1px] border-lightBorderColor dark:border-darkSecondary",children:[e.jsxs("div",{className:"px-4 relative py-3 grid grid-cols-1 md:grid-cols-2 gap-1 space-x-3 border-t border-slate-100 dark:border-darkSecondary",children:[e.jsx("div",{className:"text-2xl font-semibold text-lightTextHeading",children:"Start Treatment"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(w,{text:"Edit Case Sheet",className:"btn btn-sm bg-lightBgBtn dark:hover:bg-darkBtnHover dark:bg-darkBtn hover:bg-lightHoverBgBtn mt-1 md:mt-2 px-4 py-2 rounded text-lightBtntext dark:text-white hover:text-white",onClick:()=>Ee(),isLoading:Oe}),e.jsx(w,{text:"Update Treatment",className:"btn btn-sm bg-lightBgBtn dark:hover:bg-darkBtnHover dark:bg-darkBtn hover:bg-lightHoverBgBtn mt-1 md:mt-2 px-4 py-2 rounded text-lightBtntext dark:text-white hover:text-white",onClick:()=>Se(),isLoading:le})]})]}),e.jsxs("div",{className:"w-[100%] h-[90vh] flex gap-3 ",children:[e.jsx("div",{className:"w-[5%] py-2",children:e.jsx("ul",{className:"flex justify-center flex-col items-center h-auto gap-12",children:Pe.map((t,o)=>e.jsx(Ue,{content:t.content,placement:"right",arrow:!0,animation:"shift-away",children:e.jsx("li",{onClick:t.action,className:"h-10 w-10 border border-dashed border-darkBtn bg-lightBgBtn dark:bg-darkBtn rounded-lg flex justify-center items-center",children:t==null?void 0:t.icon},o)}))})}),e.jsxs("div",{className:" w-[95%] overflow-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1 overflow-hidden p-0",children:[e.jsx("div",{ref:L,className:"md:container md:mx-auto px-0 md:px-1 pb-5 dark:bg-darkAccent rounded-b-3xl bg-contentBg",children:e.jsxs("div",{className:"flex flex-col border-[1px] dark:border-darkSecondary border-lightBorderColor rounded-lg md:mx-auto px-0 md:px-3 shadow-sm",children:[e.jsx("div",{className:"py-5 px-3",children:e.jsx("h2",{className:"text-2xl font-semibold text-lightTextHeading",children:"Chief Complaints"})}),e.jsx("div",{className:"overflow-x-auto pb-4",children:e.jsxs("table",{className:"min-w-full ",children:[e.jsx("thead",{className:"bg-[#C9FEFF] dark:bg-darkBtn dark:text-white sticky top-0",children:e.jsxs("tr",{className:"border-b border-dashed border-lighttableBorderColor",children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Tooth"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Complaints"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-darkAccent",children:F&&F.length>0?F.map((t,o)=>{var n;const h=(t==null?void 0:t.tooth).join(", "),r=((n=t==null?void 0:t.complaints)==null?void 0:n.map(s=>{var i;const l=s;return(i=l==null?void 0:l.compId)==null?void 0:i.complaintName})).join(", ");return e.jsxs("tr",{className:"border-b border-dashed border-lighttableBorderColor",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 whitespace-nowrap text-start text-sm font-medium text-tableTextColor dark:text-white",children:h}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-start text-sm text-tableTextColor dark:text-white",children:r})]},o)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"2",className:"px-6 py-4 text-center text-lg font-medium text-lightModalHeaderColor",children:"NO DATA FOUND"})})})]})})]})}),e.jsx("div",{ref:y,className:"md:container md:mx-auto px-0 md:px-1 pb-5 dark:bg-darkAccent rounded-b-3xl bg-contentBg",children:e.jsxs("div",{className:"flex flex-col border-[1px] dark:border-darkSecondary border-lightBorderColor rounded-lg md:mx-auto px-0 md:px-3 shadow-sm",children:[e.jsx("div",{className:"py-5 px-3",children:e.jsx("h2",{className:"text-2xl font-semibold text-lightTextHeading",children:"Clinical Findings"})}),e.jsx("div",{className:"overflow-x-auto pb-4",children:e.jsxs("table",{className:"min-w-full ",children:[e.jsx("thead",{className:"bg-[#C9FEFF] dark:bg-darkBtn dark:text-white sticky top-0",children:e.jsxs("tr",{className:"border-b border-dashed border-lighttableBorderColor",children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Tooth"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Findings"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-darkAccent",children:D&&D.length>0?D.map((t,o)=>{var n;const h=(t==null?void 0:t.tooth).join(", "),r=((n=t==null?void 0:t.findings)==null?void 0:n.map(s=>{var i;const l=s;return(i=l==null?void 0:l.findId)==null?void 0:i.findingsName})).join(", ");return e.jsxs("tr",{className:"border-b border-dashed border-lighttableBorderColor",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 whitespace-nowrap text-start text-sm font-medium text-tableTextColor dark:text-white",children:h}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-start text-sm text-tableTextColor dark:text-white",children:r})]},o)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"2",className:"px-6 py-4 text-center text-lg font-medium text-lightModalHeaderColor",children:"NO DATA FOUND"})})})]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1 overflow-hidden p-0",children:[e.jsx("div",{ref:y,className:"md:container md:mx-auto px-0 md:px-1 pb-5 dark:bg-darkAccent rounded-b-3xl bg-contentBg",children:e.jsxs("div",{className:"flex flex-col border-[1px] dark:border-darkSecondary border-lightBorderColor rounded-lg md:mx-auto px-0 md:px-3 shadow-sm",children:[e.jsx("div",{className:"py-5 px-3",children:e.jsx("h2",{className:"text-2xl font-semibold text-lightTextHeading",children:"Diagnosis"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full mb-4 ",children:[e.jsx("thead",{className:"bg-[#C9FEFF] dark:bg-darkBtn dark:text-white sticky top-0",children:e.jsxs("tr",{className:"border-b border-dashed border-lighttableBorderColor",children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-start  text-xs font-semibold  tracking-wider",children:"Tooth"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Diagnosis"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-darkAccent",children:I&&I.length>0?I.map((t,o)=>{var n;const h=(t==null?void 0:t.tooth).join(", "),r=((n=t==null?void 0:t.findings)==null?void 0:n.map(s=>{var i;const l=s;return(i=l==null?void 0:l.findId)==null?void 0:i.findingsName})).join(", ");return e.jsxs("tr",{className:"border-b border-dashed border-lighttableBorderColor",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 whitespace-nowrap text-start text-sm font-medium text-tableTextColor dark:text-white",children:h}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-start text-sm text-tableTextColor dark:text-white",children:r})]},o)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-lg font-medium text-lightModalHeaderColor",children:"NO DATA FOUND"})})})]})})]})}),e.jsx("div",{ref:U,className:"md:container md:mx-auto px-0 md:px-1 pb-5 dark:bg-darkAccent rounded-b-3xl bg-contentBg",children:e.jsxs("div",{className:"flex flex-col border-[1px] dark:border-darkSecondary border-lightBorderColor rounded-lg md:mx-auto px-0 md:px-3 shadow-sm",children:[e.jsx("div",{className:"py-5 px-3",children:e.jsx("h2",{className:"text-2xl font-semibold text-lightTextHeading",children:"Medical History"})}),e.jsx("div",{className:"flex gap-2"}),e.jsx("div",{className:"overflow-x-auto pb-4",children:e.jsxs("table",{className:"min-w-full ",children:[e.jsx("thead",{className:"bg-[#C9FEFF] dark:bg-darkBtn dark:text-white sticky top-0",children:e.jsxs("tr",{className:"border-b border-dashed border-lighttableBorderColor",children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Medical History"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Reading"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-darkAccent",children:O&&O.length>0?O.map((t,o)=>{var c;const h=((c=t==null?void 0:t.medicals)==null?void 0:c.map(r=>{var s;const n=r;return(s=n==null?void 0:n.medId)==null?void 0:s.caseName})).join(", ");return e.jsxs("tr",{className:"border-b border-dashed border-lighttableBorderColor",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-start text-sm text-tableTextColor dark:text-white",children:h}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-start text-sm text-tableTextColor dark:text-white",children:t.reading})]},o)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"1",className:"px-6 py-4 text-center text-lg font-medium text-lightModalHeaderColor",children:"NO DATA FOUND"})})})]})})]})})]}),e.jsx("div",{ref:V,className:"md:container md:mx-auto px-0 md:px-1 pb-5 dark:bg-darkAccent rounded-b-3xl bg-contentBg",children:e.jsxs("div",{className:"flex flex-col border-[1px] dark:border-darkSecondary border-lightBorderColor rounded-lg md:mx-auto px-0 md:px-3  shadow-sm",children:[e.jsx("div",{className:"py-5 px-3",children:e.jsx("h2",{className:"text-2xl font-semibold text-lightTextHeading",children:"Services"})}),e.jsx("div",{className:"overflow-x-auto pb-4",children:e.jsxs("table",{className:"min-w-full ",children:[e.jsx("thead",{className:"bg-[#C9FEFF] dark:bg-darkBtn dark:text-white sticky top-0",children:e.jsxs("tr",{className:"border-b border-dashed border-lighttableBorderColor",children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Tooth"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Department"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Service"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Rate"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Quantity"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Subtotal"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Discount"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Grand Total"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-darkAccent",children:H&&H.length>0?[...H].reverse().map((t,o)=>{var c,r,n,s;const h=(t==null?void 0:t.tooth).join(", ");return e.jsxs("tr",{className:"border-b border-dashed border-lighttableBorderColor",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 whitespace-nowrap text-start text-sm font-medium text-tableTextColor dark:text-white",children:h}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-start text-sm text-tableTextColor dark:text-white",children:(r=(c=t==null?void 0:t.department)==null?void 0:c.deptId)==null?void 0:r.deptName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-start text-sm text-tableTextColor dark:text-white",children:(s=(n=t==null?void 0:t.service)==null?void 0:n.servId)==null?void 0:s.serviceName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-start text-sm text-tableTextColor dark:text-white",children:t==null?void 0:t.rate}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-start text-sm text-tableTextColor dark:text-white",children:t==null?void 0:t.quaintity}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-start text-sm text-tableTextColor dark:text-white",children:t==null?void 0:t.subTotal}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-start text-sm text-tableTextColor dark:text-white",children:t==null?void 0:t.discount}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-start text-sm text-tableTextColor dark:text-white",children:t==null?void 0:t.grantTotal})]},o)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-lg font-medium text-lightModalHeaderColor",children:"NO DATA FOUND"})})})]})})]})}),e.jsx("div",{className:"md:container md:mx-auto px-0 md:px-1 pb-5 dark:bg-darkAccent rounded-b-3xl bg-contentBg",children:e.jsxs("div",{className:"flex flex-col border-[1px] dark:border-darkSecondary border-lightBorderColor rounded-lg md:mx-auto px-0 md:px-3  shadow-sm",children:[e.jsx("div",{className:"py-5 px-3",children:e.jsx("h2",{className:"text-2xl font-semibold text-lightTextHeading",children:"Treatment Plan"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"tooth-selection flex  items-center flex-row gap-2 mb-5",children:[e.jsx("button",{className:"border px-2 py-1    dark:hover:text-black border-dashed border-lightHoverBgBtn rounded-lg ",onClick:()=>X("all"),children:"All Teeth"}),f.map((t,o)=>e.jsx("button",{onClick:()=>X(t.tooth),className:`border px-2 py-1    dark:hover:text-black border-dashed border-lightHoverBgBtn rounded-lg ${P.includes(t.tooth)?"bg-lightBgBtn dark:bg-darkBtn":""} `,children:t.tooth},o))]}),e.jsx("div",{className:"overflow-x-auto border mb-4 border-dashed border-lightHoverBgBtn rounded-sm px-2 py-4",children:Ce.map((t,o)=>{var d;return e.jsxs("div",{children:[e.jsx("div",{className:"text-end px-2 py-2",children:e.jsxs("span",{children:["Status: ",t.completed===t.total?"Completed":"In Progress"," ",t.completed,"/",t.total]})}),e.jsx("div",{className:"border-[1px] border-lightBorderColor px-2 py-2 rounded-lg mb-2",children:e.jsxs("div",{children:[e.jsxs("span",{children:["Tooth: ",t.tooth]}),e.jsx("div",{className:"bg-gray-600 h-[1px]"}),(d=t.service)==null?void 0:d.map((h,c)=>{var r,n;return e.jsxs("div",{className:"mx-3 py-2",children:[e.jsx("span",{children:(r=h.service)==null?void 0:r.serviceName}),(n=h.procedure)==null?void 0:n.map((s,l)=>e.jsxs("div",{className:"mx-3 py-2 flex justify-start my-2 items-center gap-2",children:[e.jsxs("div",{className:" relative ",children:[e.jsx("span",{children:e.jsxs("button",{ref:A,onClick:()=>pe(s._id,t.tooth),className:`btn w-[7.2rem] font-[400] justify-center border border-lightBtntext  btn-sm flex gap-1 items-center px-1 py-1 rounded-md   dark:text-white ${s.finished=="In Progress"?"text-blue-700":s.finished=="Completed"?"text-green-700":s.finished=="Cancelled"?"text-red-700":"text-green-700"}`,children:[s.finished,e.jsx(_e,{className:"text-gray-700"})]})}),he[s._id+t.tooth]?e.jsx("div",{ref:T,className:"absolute z-50 w-[100%] top-[-6.6rem] right-[0rem]",children:e.jsx("div",{className:"",children:e.jsx("div",{className:"w-[10.2rem] h-[100%] shadow-lg border border-lightborderInputColor dark:border-darkSecondary rounded-lg bg-white dark:bg-darkBtn",children:e.jsx("div",{className:"grid grid-cols-1",children:e.jsxs("div",{className:"border-t border-lightborderInputColor dark:border-darkSecondary",children:[e.jsx("button",{className:"px-3 py-1 w-[100%] relative cursor-pointer",children:e.jsxs("button",{disabled:s.finished==="In Progress",onClick:()=>M(s._id,t.tooth,"In Progress"),className:`flex py-2 flex-row items-center w-full gap-2 rounded-lg px-2 ${s.finished==="In Progress"?"bg-lightBgBtn dark:bg-lightBtntext ":""} hover:bg-lightBgBtn  dark:hover:bg-lightBtntext dark:hover:text-white`,children:[e.jsx("span",{className:"",children:e.jsx(W,{className:"text-xl text-blue-600"})}),e.jsx("p",{className:" dark:text-white",children:"In Progress"})]})}),e.jsx("button",{className:"px-3 py-1 w-[100%] relative cursor-pointer",children:e.jsxs("button",{disabled:s.finished==="Completed",onClick:()=>M(s._id,t.tooth,"Completed"),className:`flex py-2 flex-row items-center  w-full gap-2 rounded-lg px-2 ${s.finished==="Completed"?"bg-lightBgBtn dark:bg-lightBtntext ":""} hover:bg-lightBgBtn  dark:hover:bg-lightBtntext dark:hover:text-white`,children:[e.jsx("span",{className:"",children:e.jsx(W,{className:"text-xl text-green-500"})}),e.jsx("p",{className:" dark:text-white",children:"Completed"})]})}),e.jsx("button",{className:"px-3 py-1 w-[100%] relative cursor-pointer",children:e.jsxs("button",{disabled:s.finished==="Cancelled",onClick:()=>M(s._id,t.tooth,"Cancelled"),className:`flex py-2 flex-row items-center  w-full gap-2 rounded-lg px-2 ${s.finished==="Cancelled"?"bg-lightBgBtn dark:bg-lightBtntext ":""} hover:bg-lightBgBtn  dark:hover:bg-lightBtntext dark:hover:text-white`,children:[e.jsx("span",{className:"",children:e.jsx(W,{className:"text-xl text-red-500"})}),e.jsx("p",{className:" dark:text-white",children:"Cancelled"})]})})]})})})})}):""]}),e.jsx("span",{children:s.procedureName})]},l))]},c)})]})})]},o)})})]}),g&&(g==null?void 0:g.length)>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full ",children:[e.jsx("thead",{className:"bg-[#C9FEFF] dark:bg-darkBtn dark:text-white sticky top-0",children:e.jsxs("tr",{className:"border-b border-dashed border-lighttableBorderColor",children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Tooth"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Service"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Procedure"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-darkAccent",children:g&&g.length>0?[...g].reverse().map((t,o)=>{var n,s,l;const h=((n=t==null?void 0:t.procedure)==null?void 0:n.map(i=>{var b;return(b=i==null?void 0:i.procedId)==null?void 0:b.procedureName})).join(", "),r=(t==null?void 0:t.tooth).join(", ");return e.jsxs("tr",{className:"border-b border-dashed border-lighttableBorderColor",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 whitespace-nowrap text-start text-sm font-medium text-tableTextColor dark:text-white",children:r}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-start text-sm text-tableTextColor dark:text-white",children:(l=(s=t==null?void 0:t.service)==null?void 0:s.servId)==null?void 0:l.serviceName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-start text-sm text-tableTextColor dark:text-white",children:h})]},o)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"px-6 py-4 text-center text-lg font-medium text-lightModalHeaderColor",children:"NO DATA FOUND"})})})]})}):""]})}),e.jsx("div",{ref:_,className:"md:container md:mx-auto px-0 md:px-1 pb-5 dark:bg-darkAccent rounded-b-3xl bg-contentBg",children:e.jsxs("div",{className:"flex flex-col border-[1px] dark:border-darkSecondary border-lightBorderColor rounded-lg md:mx-auto px-0 md:px-3 shadow-sm",children:[e.jsx("div",{className:"py-5 px-3",children:e.jsx("h2",{className:"text-2xl font-semibold text-lightTextHeading",children:"Investigation"})}),e.jsx("div",{className:"overflow-x-auto pb-4",children:e.jsxs("table",{className:"min-w-full ",children:[e.jsx("thead",{className:"bg-[#C9FEFF] dark:bg-darkBtn dark:text-white sticky top-0",children:e.jsxs("tr",{className:"border-b border-dashed border-lighttableBorderColor",children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"File Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"File Type"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Remark"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-darkAccent",children:R&&R.length>0?R.map((t,o)=>e.jsxs("tr",{className:"border-b border-dashed border-lighttableBorderColor",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 whitespace-nowrap text-start text-sm font-medium text-tableTextColor dark:text-white",children:t==null?void 0:t.file}),e.jsx("th",{scope:"row",className:"px-6 py-4 whitespace-nowrap text-start text-sm font-medium text-tableTextColor dark:text-white",children:t==null?void 0:t.fileType}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-start text-sm text-tableTextColor dark:text-white",children:t==null?void 0:t.remark})]},o)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"px-6 py-4 text-center text-lg font-medium text-lightModalHeaderColor",children:"NO DATA FOUND"})})})]})})]})}),e.jsx("div",{ref:$,className:"md:container md:mx-auto px-0 md:px-1 pb-5 dark:bg-darkAccent rounded-b-3xl bg-contentBg",children:e.jsxs("div",{className:"flex flex-col border-[1px] dark:border-darkSecondary border-lightBorderColor rounded-lg md:mx-auto px-0 md:px-3 shadow-sm",children:[e.jsx("div",{className:"py-5 px-3",children:e.jsx("h2",{className:"text-2xl font-semibold text-lightTextHeading",children:"Other Attachments"})}),e.jsx("div",{className:"overflow-x-auto pb-4",children:e.jsxs("table",{className:"min-w-full ",children:[e.jsx("thead",{className:"bg-[#C9FEFF] dark:bg-darkBtn dark:text-white sticky top-0",children:e.jsxs("tr",{className:"border-b border-dashed border-lighttableBorderColor",children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"File Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Remark"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-darkAccent",children:E&&E.length>0?E.map((t,o)=>e.jsxs("tr",{className:"border-b border-dashed border-lighttableBorderColor",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 whitespace-nowrap text-start text-sm font-medium text-tableTextColor dark:text-white",children:t==null?void 0:t.file}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-start text-sm text-tableTextColor dark:text-white",children:t==null?void 0:t.remark})]},o)):e.jsx("tr",{children:e.jsx("td",{colSpan:"2",className:"px-6 py-4 text-center text-lg font-medium text-lightModalHeaderColor",children:"NO DATA FOUND"})})})]})})]})}),e.jsx("div",{ref:z,className:"md:container md:mx-auto px-0 md:px-1 pb-5 dark:bg-darkAccent rounded-b-3xl bg-contentBg",children:e.jsxs("div",{className:"flex flex-col border-[1px] dark:border-darkSecondary border-lightBorderColor rounded-lg md:mx-auto px-0 md:px-3 shadow-sm",children:[e.jsx("div",{className:"py-5 px-3",children:e.jsx("h2",{className:"text-2xl font-semibold text-lightTextHeading",children:"Notes"})}),e.jsx("div",{className:"overflow-x-auto pb-4",children:e.jsxs("table",{className:"min-w-full ",children:[e.jsx("thead",{className:"bg-[#C9FEFF] dark:bg-darkBtn dark:text-white sticky top-0",children:e.jsx("tr",{className:"border-b border-dashed border-lighttableBorderColor",children:e.jsx("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-semibold  tracking-wider",children:"Notes"})})}),e.jsx("tbody",{className:"bg-white dark:bg-darkAccent",children:N&&(N==null?void 0:N.length)>0?N.map((t,o)=>(console.log("item note",t==null?void 0:t.noteDescription),e.jsx("tr",{className:"border-b border-dashed border-lighttableBorderColor",children:e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-start text-sm text-tableTextColor dark:text-white",children:t==null?void 0:t.noteDescription})},o))):e.jsx("tr",{children:e.jsx("td",{colSpan:"1",className:"px-6 py-4 text-center text-lg font-medium text-lightModalHeaderColor",children:"NO DATA FOUND"})})})]})})]})})]})]}),e.jsx("div",{className:"px-4 py-3 flex justify-end space-x-3 border-t border-slate-100 dark:border-darkSecondary",children:e.jsx("div",{className:"flex gap-2",children:e.jsx(w,{text:"Close Case",className:"btn btn-sm bg-lightBgBtn hover:bg-lightHoverBgBtn mt-1 md:mt-2 px-4 py-2 rounded text-lightBtntext hover:text-white",onClick:()=>Fe()})})}),e.jsx(Y,{appear:!0,show:ne,as:x.Fragment,children:e.jsxs(oe,{as:"div",className:"relative z-[99999]",onClose:te,children:[e.jsx(Y.Child,{as:x.Fragment,enter:m?"":"duration-300 ease-out",enterFrom:m?"":"opacity-0",enterTo:m?"":"opacity-100",leave:m?"":"duration-200 ease-in",leaveFrom:m?"":"opacity-100",leaveTo:m?"":"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-filter backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:`flex min-h-full w-auto justify-center text-center p-6 items-center "
                                    }`,children:e.jsx(Y.Child,{as:x.Fragment,enter:m?"":"duration-300  ease-out",enterFrom:m?"":"opacity-0 scale-95",enterTo:m?"":"opacity-100 scale-100",leave:m?"":"duration-200 ease-in",leaveFrom:m?"":"opacity-100 scale-100",leaveTo:m?"":"opacity-0 scale-95",children:e.jsxs(oe.Panel,{className:`w-auto transform overflow-hidden rounded-md
                                       bg-white dark:bg-darkSecondary text-left align-middle shadow-xl transition-alll  h-auto `,children:[e.jsx("div",{className:"relative overflow-hidden py-4 px-5 text-lightModalHeaderColor flex justify-end bg-white border-b border-lightBorderColor dark:bg-darkSecondary dark:border-b dark:border-darkSecondary ",children:e.jsx("button",{onClick:te,className:" text-lightmodalCrosscolor hover:bg-red-100 hover:text-lightmodalbtnText text-[22px]",children:e.jsx(Ve,{icon:"heroicons-outline:x"})})}),e.jsxs("div",{className:"flex flex-col justify-center mt-20 items-center gap-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{children:e.jsx("img",{className:" mx-auto",src:qe,alt:""})}),e.jsx("div",{children:e.jsx("h1",{className:"text-lightBtntext text-xl pt-3",children:"Are You Sure?"})}),e.jsxs("p",{className:"px-10 py-5 tex-lg dark:text-white",children:["You have ",Be," of procedure in progress. Would you like to continue them or close it anyway?"]})]}),e.jsxs("div",{className:"  md:w-[20%] w-[50%]",children:[e.jsxs("div",{className:"flex flex-col gap-2 justify-start  ",children:[e.jsx("p",{className:"text-lightBtntext text-left text-sm",children:"Mark them as :"}),e.jsxs("select",{onChange:ve,className:"form-control outline-none w-[100%] rounded-md px-2 py-2.5 border border-lightborderInputColor dark:border-darkSecondary text-lightinputTextColor dark:placeholder-darkPlaceholder bg-lightBgInputColor dark:bg-darkIconAndSearchBg dark:text-white",value:j,name:"statusProcedure",id:"",children:[e.jsx("option",{value:"",children:"--select--"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),e.jsx("div",{children:e.jsx("span",{className:"text-red-500 text-left text-sm ",children:xe})})]}),e.jsx("div",{className:"px-2 py-3 flex w-[100%] items-center  space-x-3 border-t border-slate-100 dark:border-darkSecondary",children:e.jsxs("div",{className:"flex py-5  w-[100%] justify-around gap-2",children:[e.jsx(w,{text:"Close Anyway",className:"btn btn-sm bg-blue-200 hover:bg-blue-500 mt-1 md:mt-2 px-4 py-2 rounded text-blue-900 hover:text-white",onClick:He}),e.jsx(w,{text:"Continue",className:"btn btn-sm bg-lightBgBtn hover:bg-lightHoverBgBtn mt-1 md:mt-2 px-4 py-2 rounded text-lightBtntext hover:text-white",onClick:()=>S(!1)})]})})]})]})})})})]})})]})}export{Xe as default};
