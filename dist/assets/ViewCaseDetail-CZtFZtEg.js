import{a as V,c as Y,r as m,j as e}from"./index-Bp26y0Cv.js";import{a as q}from"./index-yhx5pXTX.js";function K(){var v,w,k,y,C,B,S,P,A,H;const T=V(),{caseSheetData:g,hasCaseSheet:$}=Y(t=>t==null?void 0:t.caseSheetSlice),[s,E]=m.useState({}),[f,I]=m.useState([]),[h,u]=m.useState("All"),[j,N]=m.useState([]),[F,z]=m.useState(!1),[M,D]=m.useState(!1),[o,p]=m.useState({cheifComp:!0,onExam:!0,medical:!0,investigation:!0,notes:!0});console.log("treatmentPlanData3",f),console.log("filteredTreatmentPlanData",j);const R=m.useRef();m.useEffect(()=>{if(g&&$){const t=g==null?void 0:g.treatmentData3,a=t==null?void 0:t.map(n=>{var c;let d=0;return(c=n==null?void 0:n.service)==null||c.forEach(r=>{var l;(l=r==null?void 0:r.procedure)==null||l.forEach(()=>{d++})}),{tooth:n==null?void 0:n.tooth,service:n==null?void 0:n.service,total:d,completed:(n==null?void 0:n.completed)||0}});I(a),E(g)}},[g]),m.useEffect(()=>{(()=>{if(h==="All")N(f);else{const a=f.map(n=>{const d=n.service.map(c=>{const r=c.procedure.filter(l=>h==="Completed"&&l.finished=="Completed"||h==="In Progress"&&l.finished=="In Progress"||h==="Cancelled"&&l.finished=="Cancelled");return r.length>0?{...c,procedure:r}:null}).filter(c=>c!==null);return d.length>0?{...n,service:d}:null}).filter(n=>n!==null);N(a)}})()},[h,f]);function L(t){const a=new Date(t),n=a.getHours(),d=a.getMinutes(),c=`${n.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`,r=a.getDate(),l=a.getMonth()+1,i=a.getFullYear(),x=`${r.toString().padStart(2,"0")}/${l.toString().padStart(2,"0")}/${i}`;return`${c}, ${x}`}async function O(){try{T("/previewCaseDetails",{state:{show:o,showMedicalHistory:F,showNotes:M,filter:h}})}catch{console.log("error while navigating to previwe page")}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"md:container md:mx-auto pb-5 dark:bg-darkAccent rounded-b-3xl bg-contentBg",children:[e.jsx("div",{ref:R,className:"printable-content",children:e.jsx("div",{className:"border-[1px] py-5 dark:border-darkSecondary border-lightBorderColor rounded-lg md:mx-auto px-0 md:px-8 h-auto",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between",children:[e.jsxs("div",{className:"pt-5 xl:w-[30%] md:w-2/5 w-[100%]",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-lightBtntext text-xl font-bold mb-1 mt-3",children:"Chief Complaints"}),e.jsx("input",{className:"w-4 h-4",type:"checkbox",checked:o.cheifComp,onChange:()=>p(t=>({...t,cheifComp:!o.cheifComp}))})]}),o.cheifComp?e.jsx("ul",{className:" text-gray-700 px-5 text-base list-disc",children:s&&((v=s==null?void 0:s.cheifComplaints)==null?void 0:v.length)>0?(w=s==null?void 0:s.cheifComplaints)==null?void 0:w.map((t,a)=>{var l;const d=(t==null?void 0:t.tooth).join(", "),r=((l=t==null?void 0:t.complaints)==null?void 0:l.map(i=>{var b;const x=i;return(b=x==null?void 0:x.compId)==null?void 0:b.complaintName})).join(", ");return e.jsxs("li",{children:[e.jsx("span",{className:"font-bold",children:r})," in relation to"," ",e.jsx("span",{className:"font-bold",children:d})]},a)}):"N/A"}):"",e.jsx("div",{className:"border-b my-4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-lightBtntext text-xl font-bold mb-1",children:"On Examination"}),e.jsx("input",{className:"w-4 h-4",type:"checkbox",checked:o.onExam,onChange:()=>p(t=>({...t,onExam:!o.onExam}))})]}),o.onExam?e.jsx("ul",{className:"px-5 text-gray-700 text-base list-disc",children:s&&((k=s==null?void 0:s.clinicalFindings)==null?void 0:k.length)>0?(y=s==null?void 0:s.clinicalFindings)==null?void 0:y.map((t,a)=>{var l;const d=(t==null?void 0:t.tooth).join(", "),r=((l=t==null?void 0:t.findings)==null?void 0:l.map(i=>{var b;const x=i;return(b=x==null?void 0:x.findId)==null?void 0:b.findingsName})).join(", ");return e.jsxs("li",{children:[e.jsx("span",{className:"font-bold",children:r})," in relation to"," ",e.jsx("span",{className:"font-bold",children:d})]},a)}):"N/A"}):"",e.jsx("div",{className:"border-b my-4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-lightBtntext text-xl font-bold mb-3",children:"Medical History"}),e.jsx("input",{className:"w-4 h-4",type:"checkbox",checked:o.medical,onChange:()=>p(t=>({...t,medical:!o.medical}))})]}),o.medical?e.jsx("ul",{className:"px-5 text-gray-700 text-base list-disc",children:s&&((C=s==null?void 0:s.medicalHistory)==null?void 0:C.length)>0?(B=s==null?void 0:s.medicalHistory)==null?void 0:B.map((t,a)=>{var c;const d=((c=t==null?void 0:t.medicals)==null?void 0:c.map(r=>{var i;const l=r;return(i=l==null?void 0:l.medId)==null?void 0:i.caseName})).join(", ");return e.jsx("li",{children:e.jsx("span",{className:"font-bold",children:d})},a)}):"N/A"}):"",e.jsx("div",{className:"border-b my-4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-lightBtntext text-xl font-bold mb-1",children:"Investigation"}),e.jsx("input",{className:"w-4 h-4",type:"checkbox",checked:o.investigation,onChange:()=>p(t=>({...t,investigation:!o.investigation}))})]}),o.investigation?e.jsx("ul",{className:"px-5 text-gray-700 text-base list-disc",children:s&&((S=s==null?void 0:s.investigation)==null?void 0:S.length)>0?(P=s==null?void 0:s.investigation)==null?void 0:P.map((t,a)=>e.jsxs("li",{children:[e.jsx("span",{className:"font-bold",children:t==null?void 0:t.fileType}),","," ",e.jsx("span",{className:"font-bold",children:t==null?void 0:t.remark})]},a)):"N/A"}):"",e.jsx("div",{className:"border-b my-4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-lightBtntext text-xl font-bold mb-1",children:"Notes"}),e.jsx("input",{className:"w-4 h-4",type:"checkbox",checked:o.notes,onChange:()=>p(t=>({...t,notes:!o.notes}))})]}),o.notes?e.jsx("ul",{className:"px-5 text-gray-700 text-base list-disc",children:s&&((A=s==null?void 0:s.note)==null?void 0:A.length)>0?(H=s==null?void 0:s.note)==null?void 0:H.map((t,a)=>e.jsx("li",{children:e.jsxs("span",{className:"font-bold",children:[" ",t==null?void 0:t.noteDescription]})},a)):"N/A"}):""]}),e.jsx("div",{className:"border-r mt-5 border-[#F6C000] border-dashed hidden md:block mx-9"}),e.jsxs("div",{className:"relative pt-5 mb-13 flex-grow  xl:w-3/4 md:w-3/5 w-full",children:[e.jsx("h2",{className:"text-2xl font-semibold text-lightTextHeading mb-3",children:"Treatment Plan"}),e.jsxs("div",{className:"flex justify-start gap-1 mb-4",children:[e.jsx("button",{onClick:()=>u("All"),className:`border px-2 py-1    dark:hover:text-black border-dashed border-lightHoverBgBtn rounded-lg ${h==="All"?"bg-lightBgBtn dark:bg-darkBtn":""} `,children:"All"}),e.jsx("button",{onClick:()=>u("Completed"),className:`border px-2 py-1    dark:hover:text-black border-dashed border-lightHoverBgBtn rounded-lg ${h==="Completed"?"bg-lightBgBtn dark:bg-darkBtn":""} `,children:"Completed"}),e.jsx("button",{onClick:()=>u("In Progress"),className:`border px-2 py-1    dark:hover:text-black border-dashed border-lightHoverBgBtn rounded-lg ${h==="In Progress"?"bg-lightBgBtn dark:bg-darkBtn":""} `,children:"In Progress"}),e.jsx("button",{onClick:()=>u("Cancelled"),className:`border px-2 py-1    dark:hover:text-black border-dashed border-lightHoverBgBtn rounded-lg ${h==="Cancelled"?"bg-lightBgBtn dark:bg-darkBtn":""} `,children:"Cancelled"})]}),e.jsx("div",{className:"overflow-x-auto mb-4 rounded-sm py-4",children:j.map((t,a)=>{var n;return e.jsx("div",{children:e.jsx("div",{className:"border-[1px] shadow-lg border-lightBorderColor px-2 py-2 rounded-lg mb-4",children:e.jsxs("div",{children:[e.jsxs("span",{children:[e.jsx("span",{className:" py-3 text-start text-sm font-semibold  tracking-wider",children:"Tooth: "}),t.tooth]}),e.jsx("div",{className:"bg-gray-600 my-2 h-[1px]"}),(n=t.service)==null?void 0:n.map((d,c)=>{var r,l;return e.jsxs("div",{className:"mx-3 py-1",children:[e.jsxs("span",{children:[" ",e.jsx("span",{className:"text-start text-sm font-semibold  tracking-wider",children:"Service : "})," ",e.jsx("span",{className:"whitespace-nowrap text-start text-sm text-black dark:text-white",children:(r=d.service)==null?void 0:r.serviceName})," "]}),e.jsxs("div",{className:"w-[100%] flex",children:[e.jsx("div",{className:"w-[11%]"}),e.jsx("table",{className:"table-auto w-[80%] ",children:e.jsx("tbody",{children:(l=d.procedure)==null?void 0:l.map((i,x)=>e.jsxs("tr",{className:" flex flex-row items-start",children:[e.jsxs("td",{className:"flex items-center px-0  w-6/12",children:[e.jsx("span",{className:" text-xl",children:e.jsx(q,{})})," ",e.jsx("span",{className:"whitespace-nowrap text-start text-sm text-black dark:text-white",children:i.procedureName})," "]}),e.jsx("td",{className:`px-0  w-3/12  font-[400] ${i.finished=="Completed"?"text-green-700":i.finished=="Cancelled"?" text-red-700":"text-blue-700"}`,children:i.finished}),e.jsx("td",{className:`px-0 text-sm  w-3/12 font-[400] ${i.finished?"text-green-700":"text-blue-700"}`,children:i.updatedAt?L(i.updatedAt):""})]},x))})})]})]},c)})]})})},a)})})]})]})})}),e.jsx("div",{className:"flex gap-1 justify-end mt-4",children:e.jsx("button",{onClick:O,className:"btn btn-sm dark:bg-darkBtn dark:text-white dark:hover:bg-darkBtnHover bg-lightBgBtn hover:bg-lightHoverBgBtn mt-1 md:mt-2 px-4 py-2 rounded text-lightBtntext hover:text-white",children:"Preview"})})]})})}export{K as default};
