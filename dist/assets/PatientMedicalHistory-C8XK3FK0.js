import{r as i,c as w,V as x,j as e,G as v,H as k,R as N}from"./index-Bp26y0Cv.js";function S(){const[H,g]=i.useState([]),[l,o]=i.useState([]),[u,d]=i.useState(!1),[f,h]=i.useState(!0),{patientDetail:n,hasData:C}=w(t=>t==null?void 0:t.currentPatientSlice);i.useEffect(()=>{n&&(n!=null&&n._id)&&m(n==null?void 0:n._id)},[n]);async function m(t){var s,c,a,p;try{const r=await x.getMedicalHistoryOfPatient(n==null?void 0:n._id);if((s=r==null?void 0:r.data)!=null&&s.medicalHistory&&((a=(c=r==null?void 0:r.data)==null?void 0:c.medicalHistory)==null?void 0:a.length)>0)o((p=r==null?void 0:r.data)==null?void 0:p.medicalHistory),h(!1);else{const j=await y();o(j),h(!1)}}catch(r){console.log("error while getting patient medidcal history",r)}}async function y(){var t;try{const s=await x.getMedicalHistoryData(),c=(t=s==null?void 0:s.data)==null?void 0:t.map(a=>({name:a==null?void 0:a.caseName,note:"",positive:!1,negative:!1,unknown:!1,id:a==null?void 0:a._id}));return g(c),c}catch(s){console.log("error while getting the complaint",s)}}async function b(t){try{d(!0);const s={patientId:n==null?void 0:n._id,medicalHistoryData:l},c=await x.updateMedicalHistoryOfPatient(s);d(!1)}catch(s){d(!1),console.log("error while updating the medical history",s)}}return e.jsx(e.Fragment,{children:e.jsx("div",{className:"md:container md:mx-auto px-0  pb-5 dark:bg-darkAccent rounded-b-3xl bg-contentBg",children:e.jsx("div",{className:"flex flex-col border-[1px]  dark:border-darkSecondary border-lightBorderColor rounded-lg md:mx-auto px-0 md:px-8 pb-10 pt-4 h-full",children:f?e.jsx("div",{className:"h-[20rem] flex justify-center w-[100%] items-center",children:e.jsx(v,{})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-4 py-3 relative  flex justify-between items-center space-x-3  dark:border-darkSecondary",children:[e.jsx("div",{className:"text-2xl font-semibold text-black dark:text-white",children:"Medical History"}),e.jsx("div",{className:"flex",children:e.jsx(k,{text:"Update",className:"btn btn-sm bg-lightBgBtn hover:bg-lightHoverBgBtn mt-1 md:mt-2 px-4 py-2 rounded text-lightBtntext hover:text-white",onClick:()=>b(),isLoading:u})})]}),e.jsx("div",{className:"overflow-x-auto px-5",children:e.jsx("table",{className:"min-w-full mt-2   ",children:e.jsx("tbody",{className:"bg-white dark:bg-darkAccent",children:l&&l.length>0&&l.map((t,s)=>e.jsx(N.Fragment,{children:e.jsxs("tr",{className:"  border-b border-dashed border-lighttableBorderColor",children:[e.jsx("td",{className:"  px-6 py-4 whitespace-nowrap text-left  text-lg  text-tableTextColor",children:t.name}),e.jsx("td",{className:" px-6 py-4 whitespace-nowrap text-center text-sm text-tableTextColor",children:e.jsx("div",{className:"flex items-center ",children:e.jsx("textarea",{rows:2,type:"text",value:t==null?void 0:t.note,onChange:c=>{const a=[...l];a[s].note=c.target.value,o(a)},className:"px-2 py-2 w-[100%]  dark:bg-darkIconAndSearchBg bg-light rounded-lg outline-none",placeholder:"Enter Note / Reading Value "})})}),e.jsx("td",{className:" px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("label",{className:"flex gap-2 justify-center items-center",children:[e.jsx("input",{onChange:c=>{c.target.value;const a=[...l];a[s].positive=!a[s].positive,o(a)},className:"form-checkbox scale-150",type:"checkbox",name:`${t.name}-toc`,checked:t==null?void 0:t.positive})," Positive"]})}),e.jsx("td",{className:" px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("label",{className:"flex  gap-2 justify-center items-center",children:[e.jsx("input",{onChange:c=>{c.target.value;const a=[...l];a[s].negative=!a[s].negative,o(a)},className:"form-checkbox scale-150",type:"checkbox",name:`${t.name}-toc`,checked:t==null?void 0:t.negative})," Negative"]})}),e.jsx("td",{className:" px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("label",{className:"flex gap-2 justify-center items-center",children:[e.jsx("input",{onChange:c=>{c.target.value;const a=[...l];a[s].unknown=!a[s].unknown,o(a)},className:"form-checkbox scale-150",type:"checkbox",name:`${t.name}-toc`,checked:t==null?void 0:t.unknown})," Unknown"]})})]})},s))})})})]})})})})}export{S as default};
