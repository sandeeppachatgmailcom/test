import{a as R,r as x,c as O,j as t,H as V}from"./index-Bp26y0Cv.js";import{a as Y}from"./index-yhx5pXTX.js";function J(){var b,N,v,w,S,y,C,k,B,T;const E=R(),[A,g]=x.useState(),{caseSheetData:h,hasCaseSheet:P}=O(e=>e==null?void 0:e.caseSheetSlice),[s,$]=x.useState({}),[j,H]=x.useState([]),[p,_]=x.useState("All"),[F,u]=x.useState([]);x.useState(!1),x.useState(!1);const[m,q]=x.useState({cheifComp:!0,onExam:!0,medical:!0,investigation:!0,notes:!0}),I=x.useRef();x.useEffect(()=>{if(h&&P){const e=h==null?void 0:h.treatmentData3,a=e==null?void 0:e.map(n=>{var d;let o=0;return(d=n==null?void 0:n.service)==null||d.forEach(r=>{var l;(l=r==null?void 0:r.procedure)==null||l.forEach(()=>{o++})}),{tooth:n==null?void 0:n.tooth,service:n==null?void 0:n.service,total:o,completed:(n==null?void 0:n.completed)||0}});H(a),$(h)}},[h]),x.useEffect(()=>{(()=>{if(p==="All")u(j);else{const a=j.map(n=>{const o=n.service.map(d=>{const r=d.procedure.filter(l=>p==="Completed"&&l.finished||p==="In Progress"&&!l.finished);return r.length>0?{...d,procedure:r}:null}).filter(d=>d!==null);return o.length>0?{...n,service:o}:null}).filter(n=>n!==null);u(a)}})()},[p,j]);function L(e){const a=new Date(e),n=a.getHours(),o=a.getMinutes(),d=`${n.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`,r=a.getDate(),l=a.getMonth()+1,i=a.getFullYear(),c=`${r.toString().padStart(2,"0")}/${l.toString().padStart(2,"0")}/${i}`;return`${d}, ${c}`}async function M(){try{g(!0),g(!1),E("/patientDetail/editCaseSheet",{state:{id:h==null?void 0:h._id}})}catch(e){console.log("error while navigating to edit case sheet page",e)}}return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"md:container md:mx-auto pb-5 dark:bg-darkAccent rounded-b-3xl bg-contentBg",children:[t.jsx("div",{ref:I,className:"printable-content",children:t.jsx("div",{className:"border-[1px] py-5 dark:border-darkSecondary border-lightBorderColor rounded-lg md:mx-auto px-0 md:px-8 h-auto",children:t.jsxs("div",{className:"flex flex-col md:flex-row justify-between",children:[t.jsxs("div",{className:"pt-5 xl:w-[30%] md:w-2/5 w-[100%]",children:[t.jsx("div",{}),t.jsx("div",{className:"flex justify-between items-center",children:t.jsx("div",{className:"text-lightBtntext text-xl font-bold mb-1 mt-3",children:"Chief Complaints"})}),m.cheifComp?t.jsx("ul",{className:" text-gray-700 px-5 text-base list-disc",children:s&&((b=s==null?void 0:s.cheifComplaints)==null?void 0:b.length)>0?(N=s==null?void 0:s.cheifComplaints)==null?void 0:N.map((e,a)=>{var l;const o=(e==null?void 0:e.tooth).join(", "),r=((l=e==null?void 0:e.complaints)==null?void 0:l.map(i=>{var f;const c=i;return(f=c==null?void 0:c.compId)==null?void 0:f.complaintName})).join(", ");return t.jsxs("li",{children:[t.jsx("span",{className:"font-bold",children:r})," in relation to"," ",t.jsx("span",{className:"font-bold",children:o})]},a)}):"N/A"}):"",t.jsx("div",{className:"border-b my-4"}),t.jsx("div",{className:"flex justify-between items-center",children:t.jsx("div",{className:"text-lightBtntext text-xl font-bold mb-1",children:"On Examination"})}),m.onExam?t.jsx("ul",{className:"px-5 text-gray-700 text-base list-disc",children:s&&((v=s==null?void 0:s.clinicalFindings)==null?void 0:v.length)>0?(w=s==null?void 0:s.clinicalFindings)==null?void 0:w.map((e,a)=>{var l;const o=(e==null?void 0:e.tooth).join(", "),r=((l=e==null?void 0:e.findings)==null?void 0:l.map(i=>{var f;const c=i;return(f=c==null?void 0:c.findId)==null?void 0:f.findingsName})).join(", ");return t.jsxs("li",{children:[t.jsx("span",{className:"font-bold",children:r})," in relation to"," ",t.jsx("span",{className:"font-bold",children:o})]},a)}):"N/A"}):"",t.jsx("div",{className:"border-b my-4"}),t.jsx("div",{className:"flex justify-between items-center",children:t.jsx("div",{className:"text-lightBtntext text-xl font-bold mb-3",children:"Medical History"})}),m.medical?t.jsx("ul",{className:"px-5 text-gray-700 text-base list-disc",children:s&&((S=s==null?void 0:s.medicalHistory)==null?void 0:S.length)>0?(y=s==null?void 0:s.medicalHistory)==null?void 0:y.map((e,a)=>{var d;const o=((d=e==null?void 0:e.medicals)==null?void 0:d.map(r=>{var i;const l=r;return(i=l==null?void 0:l.medId)==null?void 0:i.caseName})).join(", ");return t.jsx("li",{children:t.jsx("span",{className:"font-bold",children:o})},a)}):"N/A"}):"",t.jsx("div",{className:"border-b my-4"}),t.jsx("div",{className:"flex justify-between items-center",children:t.jsx("div",{className:"text-lightBtntext text-xl font-bold mb-1",children:"Investigation"})}),m.investigation?t.jsx("ul",{className:"px-5 text-gray-700 text-base list-disc",children:s&&((C=s==null?void 0:s.investigation)==null?void 0:C.length)>0?(k=s==null?void 0:s.investigation)==null?void 0:k.map((e,a)=>t.jsxs("li",{children:[t.jsx("span",{className:"font-bold",children:e==null?void 0:e.fileType}),","," ",t.jsx("span",{className:"font-bold",children:e==null?void 0:e.remark})]},a)):"N/A"}):"",t.jsx("div",{className:"border-b my-4"}),t.jsx("div",{className:"flex justify-between items-center",children:t.jsx("div",{className:"text-lightBtntext text-xl font-bold mb-1",children:"Notes"})}),m.notes?t.jsx("ul",{className:"px-5 text-gray-700 text-base list-disc",children:s&&((B=s==null?void 0:s.note)==null?void 0:B.length)>0?(T=s==null?void 0:s.note)==null?void 0:T.map((e,a)=>t.jsx("li",{children:t.jsxs("span",{className:"font-bold",children:[" ",e==null?void 0:e.noteDescription]})},a)):"N/A"}):""]}),t.jsx("div",{className:"border-r mt-5 border-[#F6C000] border-dashed hidden md:block mx-9"}),t.jsxs("div",{className:"relative pt-5 mb-13 flex-grow  xl:w-3/4 md:w-3/5 w-full",children:[t.jsx("h2",{className:"text-2xl font-semibold text-lightTextHeading mb-3",children:"Treatment Plan"}),t.jsx("div",{className:"overflow-x-auto mb-4 rounded-sm py-4",children:F.map((e,a)=>{var n;return t.jsx("div",{children:t.jsx("div",{className:"border-[1px] shadow-lg border-lightBorderColor px-2 py-2 rounded-lg mb-4",children:t.jsxs("div",{children:[t.jsxs("span",{children:[t.jsx("span",{className:" py-3 text-start text-sm font-semibold  tracking-wider",children:"Tooth: "}),e.tooth]}),t.jsx("div",{className:"bg-gray-600 my-2 h-[1px]"}),(n=e.service)==null?void 0:n.map((o,d)=>{var r,l;return t.jsxs("div",{className:"mx-3 py-1",children:[t.jsxs("span",{children:[" ",t.jsx("span",{className:"text-start text-sm font-semibold  tracking-wider",children:"Service : "})," ",t.jsx("span",{className:"whitespace-nowrap text-start text-sm text-tableTextColor dark:text-white",children:(r=o.service)==null?void 0:r.serviceName})," "]}),t.jsxs("div",{className:"w-[100%] flex",children:[t.jsx("div",{className:"w-[11%]"}),t.jsx("table",{className:"table-auto w-[80%] ",children:t.jsx("tbody",{children:(l=o.procedure)==null?void 0:l.map((i,c)=>t.jsxs("tr",{className:" flex flex-row items-start",children:[t.jsxs("td",{className:"flex items-center px-0  w-6/12",children:[t.jsx("span",{className:" text-xl",children:t.jsx(Y,{})})," ",t.jsx("span",{className:"whitespace-nowrap text-start text-sm text-tableTextColor dark:text-white",children:i.procedureName})," "]}),t.jsx("td",{className:`px-0  w-3/12  font-[400] ${i.finished=="Completed"?"text-green-700":i.finished=="Cancelled"?" text-red-700":"text-blue-700"}`,children:i.finished}),t.jsx("td",{className:`px-0 text-sm  w-3/12 font-[400] ${i.finished?"text-green-700":"text-blue-700"}`,children:i.updatedAt?L(i.updatedAt):""})]},c))})})]})]},d)})]})})},a)})})]})]})})}),t.jsx("div",{className:"flex gap-1 justify-end mt-4",children:t.jsx(V,{text:"Edit Case Sheet",className:"btn btn-sm bg-lightBgBtn dark:hover:bg-darkBtnHover dark:bg-darkBtn hover:bg-lightHoverBgBtn mt-1 md:mt-2 px-4 py-2 rounded text-lightBtntext dark:text-white hover:text-white",onClick:()=>M(),isLoading:A})})]})})}export{J as default};
