import{a as nt,i as at,c as rt,r as h,j as t,ao as lt,f as dt,ap as ot}from"./index-Bp26y0Cv.js";import{a as it}from"./index-yhx5pXTX.js";function ht(){var v,y,w,S,B,C,k,I,P,$,T,F,A,E,H,L,M,G,O,R,z,U,Y,_,q;const J=nt(),m=at();m.state.showMedicalHistory,m.state.showNotes;const x=m.state.show,{caseSheetData:p,hasCaseSheet:K}=rt(s=>s==null?void 0:s.caseSheetSlice),[e,Q]=h.useState({}),[f,V]=h.useState([]),[g,W]=h.useState("All"),[j,X]=h.useState(!1),[Z,N]=h.useState([]);h.useEffect(()=>{m.state&&W(m.state.filter),!x.cheifComp&&!x.onExam&&!x.medical&&!x.investigation&&!x.notes&&X(!0)},[m.state]);const u=h.useRef();h.useEffect(()=>{if(p&&K){const s=p==null?void 0:p.treatmentData3,a=s==null?void 0:s.map(n=>{var o;let d=0;return(o=n==null?void 0:n.service)==null||o.forEach(l=>{var r;(r=l==null?void 0:l.procedure)==null||r.forEach(()=>{d++})}),{tooth:n==null?void 0:n.tooth,service:n==null?void 0:n.service,total:d,completed:(n==null?void 0:n.completed)||0}});V(a),Q(p)}},[p]),h.useEffect(()=>{(()=>{if(g==="All")N(f);else{const a=f.map(n=>{const d=n.service.map(o=>{const l=o.procedure.filter(r=>g==="Completed"&&r.finished=="Completed"||g==="In Progress"&&r.finished=="In Progress"||g==="Cancelled"&&r.finished=="Cancelled");return l.length>0?{...o,procedure:l}:null}).filter(o=>o!==null);return d.length>0?{...n,service:d}:null}).filter(n=>n!==null);N(a)}})()},[g,f]);const D=s=>{const a=new Date(s),n={hour:"2-digit",minute:"2-digit",hour12:!0};return a.toLocaleTimeString("en-US",n)},tt=s=>{const a=new Date(s),n={day:"2-digit",month:"long",year:"numeric"};return a.toLocaleDateString("en-US",n)};function et(s){const a=new Date(s),n=a.getHours(),d=a.getMinutes(),o=`${n.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`,l=a.getDate(),r=a.getMonth()+1,i=a.getFullYear(),c=`${l.toString().padStart(2,"0")}/${r.toString().padStart(2,"0")}/${i}`;return`${o}, ${c}`}const st=()=>{ot(u,{filename:"case_detail.pdf",pageSize:"A4",margin:{top:20,bottom:40,left:20,right:20}})};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"md:container md:mx-auto pb-5   h-screen bg-contentBg overflow-auto",children:[t.jsxs("div",{className:"flex bg-white py-3 z-[9999] sticky top-0 justify-between px-2 my-4",children:[t.jsx("button",{onClick:()=>J(-1),className:"btn btn-sm dark:bg-darkBtn dark:text-white dark:hover:bg-darkBtnHover bg-lightBgBtn hover:bg-lightHoverBgBtn mt-1 md:mt-2 px-4 py-2 rounded text-lightBtntext hover:text-white",children:"Back"}),t.jsxs("button",{onClick:st,className:"btn flex gap-1 items-center btn-sm dark:bg-darkBtn dark:text-white dark:hover:bg-darkBtnHover bg-lightBgBtn hover:bg-lightHoverBgBtn mt-1 md:mt-2 px-4 py-2 rounded text-lightBtntext hover:text-white",children:[t.jsx("span",{children:t.jsx(lt,{className:"text-2xl"})})," ",t.jsx("span",{children:" Download / Print"})]})]}),t.jsx("div",{ref:u,id:"print-container",className:"printable-content",children:t.jsxs("div",{className:"border-[1px] py-5  border-lightBorderColor rounded-lg md:mx-auto px-0 md:px-8 h-auto",children:[t.jsxs("div",{className:"flex flex-wrap justify-between w-[100%]",children:[t.jsxs("div",{className:"px-3 md:px-0",children:[t.jsx("div",{className:"mb-10",children:t.jsxs("div",{className:"font-semibold text-gray-700 text-sm",children:["Case ID: ",t.jsx("span",{className:"text-lightBtntext text-base",children:e==null?void 0:e.displayId})]})}),t.jsx("div",{className:"mb-2",children:t.jsxs("div",{className:"font-bold text-lightBtntext text-lg",children:["Dr. ",(v=e==null?void 0:e.createdBy)==null?void 0:v.firstName," ",(y=e==null?void 0:e.createdBy)==null?void 0:y.lastName]})})]}),t.jsxs("div",{className:"px-3 md:px-0",children:[t.jsx("div",{className:"mb-4 flex justify-end",children:t.jsx("img",{className:"h-12 lg:h-14",alt:"branch logo",src:(w=e==null?void 0:e.branchId)!=null&&w.branchLogo?`http://localhost:8089/branch/${(S=e==null?void 0:e.branchId)==null?void 0:S.branchLogo}`:dt})}),t.jsxs("div",{className:"text-right flex flex-col space-y-2",children:[t.jsxs("div",{children:[t.jsx("strong",{className:"font-semibold text-gray-700 text-base",children:"Address:"})," ",t.jsx("span",{className:"text-gray-800 text-base",children:(B=e==null?void 0:e.branchId)==null?void 0:B.address})]}),t.jsxs("div",{children:[t.jsx("strong",{className:"font-semibold text-gray-700 text-base"})," ",t.jsxs("span",{className:"text-gray-800 text-base",children:[(C=e==null?void 0:e.branchId)==null?void 0:C.city,", ",(k=e==null?void 0:e.branchId)==null?void 0:k.state,","," ",(I=e==null?void 0:e.branchId)==null?void 0:I.country]})]}),t.jsxs("div",{children:[t.jsx("strong",{className:"font-semibold text-gray-700 text-base",children:"Contact:"}),t.jsx("span",{className:"text-gray-800 text-base",children:(P=e==null?void 0:e.branchId)==null?void 0:P.contactNumber})]}),t.jsxs("div",{children:[t.jsx("strong",{className:"font-semibold text-gray-700 text-base",children:"Email:"})," ",t.jsx("span",{className:"text-gray-800 text-base",children:($=e==null?void 0:e.branchId)==null?void 0:$.emailContact})]})]})]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row border-y-2 border-dashed border-[#F6C000] py-4 justify-between items-center mt-5 w-[100%]",children:[t.jsx("div",{className:"",children:t.jsxs("div",{className:" flex flex-row flex-wrap gap-3",children:[t.jsxs("div",{className:"font-semibold text-gray-700 text-base ",children:["Patient:"," ",t.jsx("span",{className:"text-gray-900  ",children:e&&((T=e==null?void 0:e.patientId)==null?void 0:T.firstName)+" "+((F=e==null?void 0:e.patientId)==null?void 0:F.lastName)})]}),t.jsxs("div",{className:"font-semibold text-gray-700 text-base ",children:["Gender:"," ",t.jsx("span",{className:"text-gray-900  ",children:e&&((A=e==null?void 0:e.patientId)==null?void 0:A.gender)})]}),t.jsxs("div",{className:"font-semibold text-gray-700 text-base ",children:["Blood Group:"," ",t.jsx("span",{className:"text-gray-900  ",children:e&&((E=e==null?void 0:e.patientId)==null?void 0:E.bloodGroup)})]}),t.jsxs("div",{className:"font-semibold text-gray-700 text-base",children:["Age:"," ",t.jsxs("span",{className:"text-gray-900  ",children:[e&&((H=e==null?void 0:e.patientId)==null?void 0:H.age),"Yrs"]})]})]})}),t.jsx("div",{className:"",children:t.jsxs("div",{className:" flex flex-row flex-wrap gap-3",children:[t.jsxs("div",{className:"text-gray-700 text-base font-semibold ",children:["Date: ",t.jsx("span",{className:"text-gray-900  ",children:e&&tt(new Date)})]}),t.jsxs("div",{className:"text-gray-700 font-semibold text-base",children:["Time: ",t.jsx("span",{className:"text-gray-900  ",children:e&&D(new Date)})]})]})})]}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between",children:[t.jsxs("div",{className:`pt-5 ${j?"w-0":"xl:w-[30%] md:w-2/5 w-[100%]"}  `,children:[x.cheifComp?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-lightBtntext text-xl font-bold mb-3",children:"Chief Complaints"}),t.jsx("ul",{className:" text-gray-700 px-5 text-base list-disc",children:e&&((L=e==null?void 0:e.cheifComplaints)==null?void 0:L.length)>0?(M=e==null?void 0:e.cheifComplaints)==null?void 0:M.map((s,a)=>{var r;const d=(s==null?void 0:s.tooth).join(", "),l=((r=s==null?void 0:s.complaints)==null?void 0:r.map(i=>{var b;const c=i;return(b=c==null?void 0:c.compId)==null?void 0:b.complaintName})).join(", ");return t.jsxs("li",{children:[t.jsx("span",{className:"font-bold",children:l})," in relation to"," ",t.jsx("span",{className:"font-bold",children:d})]},a)}):"N/A"}),t.jsx("div",{className:"border-b my-4"})]}):"",x.onExam?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-lightBtntext text-xl font-bold mb-3",children:"On Examination"}),t.jsx("ul",{className:"px-5 text-gray-700 text-base list-disc",children:e&&((G=e==null?void 0:e.clinicalFindings)==null?void 0:G.length)>0?(O=e==null?void 0:e.clinicalFindings)==null?void 0:O.map((s,a)=>{var r;const d=(s==null?void 0:s.tooth).join(", "),l=((r=s==null?void 0:s.findings)==null?void 0:r.map(i=>{var b;const c=i;return(b=c==null?void 0:c.findId)==null?void 0:b.findingsName})).join(", ");return t.jsxs("li",{children:[t.jsx("span",{className:"font-bold",children:l})," in relation to"," ",t.jsx("span",{className:"font-bold",children:d})]},a)}):"N/A"}),t.jsx("div",{className:"border-b my-4"})]}):"",x.medical?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-lightBtntext text-xl font-bold mb-3",children:"Medical History"}),t.jsx("ul",{className:"px-5 text-gray-700 text-base list-disc",children:e&&((R=e==null?void 0:e.medicalHistory)==null?void 0:R.length)>0?(z=e==null?void 0:e.medicalHistory)==null?void 0:z.map((s,a)=>{var o;const d=((o=s==null?void 0:s.medicals)==null?void 0:o.map(l=>{var i;const r=l;return(i=r==null?void 0:r.medId)==null?void 0:i.caseName})).join(", ");return t.jsx("li",{children:t.jsx("span",{className:"font-bold",children:d})},a)}):"N/A"}),t.jsx("div",{className:"border-b my-4"})]}):"",x.investigation?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-lightBtntext text-xl font-bold mb-3",children:"Investigation"}),t.jsx("ul",{className:"px-5 text-gray-700 text-base list-disc",children:e&&((U=e==null?void 0:e.investigation)==null?void 0:U.length)>0?(Y=e==null?void 0:e.investigation)==null?void 0:Y.map((s,a)=>t.jsxs("li",{children:[t.jsx("span",{className:"font-bold",children:s==null?void 0:s.fileType}),","," ",t.jsx("span",{className:"font-bold",children:s==null?void 0:s.remark})]},a)):"N/A"}),t.jsx("div",{className:"border-b my-4"})]}):"",x.notes?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-lightBtntext text-xl font-bold mb-1",children:"Notes"}),t.jsx("ul",{className:"px-5 text-gray-700 text-base list-disc",children:e&&((_=e==null?void 0:e.note)==null?void 0:_.length)>0?(q=e==null?void 0:e.note)==null?void 0:q.map((s,a)=>t.jsx("li",{children:t.jsxs("span",{className:"font-bold",children:[" ",s==null?void 0:s.noteDescription]})},a)):"N/A"})]}):""]}),j?"":t.jsx("div",{className:"border-r mt-5 border-[#F6C000] border-dashed hidden md:block mx-9"}),t.jsxs("div",{className:`relative pt-5 mb-13 flex-grow ${j?"w-full ":" xl:w-3/4 md:w-3/5 w-full"} `,children:[t.jsx("h2",{className:"text-2xl font-semibold text-lightTextHeading mb-3",children:"Treatment Plan"}),t.jsx("div",{className:"overflow-x-auto mb-4 rounded-sm py-4",children:Z.map((s,a)=>{var n;return t.jsx("div",{children:t.jsx("div",{className:"border-[1px] shadow-lg border-lightBorderColor px-2 py-2 rounded-lg mb-4",children:t.jsxs("div",{children:[t.jsxs("span",{className:"text-black",children:[t.jsx("span",{className:" py-3 text-start text-black text-sm font-semibold  tracking-wider",children:"Tooth: "}),s.tooth]}),t.jsx("div",{className:"bg-gray-600 my-2 h-[1px]"}),(n=s.service)==null?void 0:n.map((d,o)=>{var l,r;return t.jsxs("div",{className:"mx-3 py-1",children:[t.jsxs("span",{children:[" ",t.jsx("span",{className:"text-start text-sm font-semibold  text-black tracking-wider",children:"Service : "})," ",t.jsx("span",{className:"whitespace-nowrap text-start text-sm text-black ",children:(l=d.service)==null?void 0:l.serviceName})," "]}),t.jsxs("div",{className:"w-[100%] flex",children:[t.jsx("div",{className:"w-[11%]"}),t.jsx("table",{className:"table-auto w-[80%] ",children:t.jsx("tbody",{children:(r=d.procedure)==null?void 0:r.map((i,c)=>t.jsxs("tr",{className:" flex flex-row items-start",children:[t.jsxs("td",{className:"flex items-center px-0  w-6/12",children:[t.jsx("span",{className:" text-xl",children:t.jsx(it,{})})," ",t.jsx("span",{className:"whitespace-nowrap text-start text-sm text-black ",children:i.procedureName})," "]}),t.jsx("td",{className:`px-0  w-3/12  font-[400] ${i.finished=="Completed"?"text-green-700":i.finished=="Cancelled"?" text-red-700":"text-blue-700"}`,children:i.finished}),t.jsx("td",{className:`px-0 text-sm  w-3/12 font-[400] ${i.finished?"text-green-700":"text-blue-700"}`,children:i.updatedAt?et(i.updatedAt):""})]},c))})})]})]},o)})]})})},a)})})]})]})]})})]})})}export{ht as default};
